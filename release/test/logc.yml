dev:
  logdAddr: logd.dev
  <<: *defaults
demo:
  logdAddr: logd.demo
  <<: *defaults
qa:
  logdAddr: logd.qa
  <<: *defaults
production:
  logdAddr: logd.com
  <<: *defaults

defaults: &defaults
  names: test
  files:
    - { org: test-org, name: app-log, path: app.log, mapping: *mapping }
    - { org: test-org, name: app-err, path: app.err, mapping: *mapping }
    - { org: test-consume, name: consume-log, path: consume.log, mapping: *mappingConsume }
  rotateTime: "33 * * * * *"
  rotateCmd:  [ logrotate, logrotate.conf ]
  batchSize: 1024
  mailer: mailer://smtp.qq.com:25/?user=小美<xiaomei-go@qq.com>&pass=zjsbosjlhgugechh
  keepers: [ "houzhiliang@retail-tek.com" ]

mapping: &mapping
  at: { type: date, format: "yyyy-MM-dd'T'HH:mm:ssZ" }
  duration: { type: float }
  host: { type: keyword }
  method: { type: keyword }
  path: { type: text }
  query: { type: text }
  status: { type: keyword }
  req_body: { type: integer }
  res_body: { type: integer }
  ip: { type: ip }
  refer: { type: text }
  agent: { type: text }
  proto: { type: keyword }
  # session: sess
mappingConsume: &mappingConsume
  at: { type: date, format: "yyyy-MM-dd'T'HH:mm:ssZ" }
  data: { type: object }
